{% load static %}
{% load i18n %}
{% load resource_extras %}

<!-- Header -->
<header id="header" class="shadow-xs">

    <!-- Navbar -->
    <div class="container position-relative">

        <nav class="navbar navbar-expand-lg navbar-light justify-content-lg-between justify-content-md-inherit">

            <div class="align-items-start">

                <!-- mobile menu button : show -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMainNav"
                        aria-controls="navbarMainNav" aria-expanded="false" aria-label="Toggle navigation">
                    <svg width="25" viewBox="0 0 20 20">
                        <path d="M 19.9876 1.998 L -0.0108 1.998 L -0.0108 -0.0019 L 19.9876 -0.0019 L 19.9876 1.998 Z"></path>
                        <path d="M 19.9876 7.9979 L -0.0108 7.9979 L -0.0108 5.9979 L 19.9876 5.9979 L 19.9876 7.9979 Z"></path>
                        <path d="M 19.9876 13.9977 L -0.0108 13.9977 L -0.0108 11.9978 L 19.9876 11.9978 L 19.9876 13.9977 Z"></path>
                        <path d="M 19.9876 19.9976 L -0.0108 19.9976 L -0.0108 17.9976 L 19.9876 17.9976 L 19.9876 19.9976 Z"></path>
                    </svg>
                </button>

                <!-- navbar : brand (logo) -->
                <a class="navbar-brand" href="{% url 'index' %}">
                    <img src="{% static 'images/logo/logo.jpg' %}" height="50"  alt="...">
                </a>

            </div>


            <!-- Menu -->
            <!--

                Dropdown Classes (should be added to primary .dropdown-menu only, dropdown childs are also affected)
                    .dropdown-menu-dark 		- dark dropdown (desktop only, will be white on mobile)
                    .dropdown-menu-hover 		- open on hover
                    .dropdown-menu-clean 		- no background color on hover
                    .dropdown-menu-invert 		- open dropdown in oposite direction (left|right, according to RTL|LTR)
                    .dropdown-menu-uppercase 	- uppercase text (font-size is scalled down to 13px)
                    .dropdown-click-ignore 		- keep dropdown open on inside click (useful on forms inside dropdown)

                    Repositioning long dropdown childs (Example: Pages->Account)
                        .dropdown-menu-up-n100 		- open up with top: -100px
                        .dropdown-menu-up-n100 		- open up with top: -150px
                        .dropdown-menu-up-n180 		- open up with top: -180px
                        .dropdown-menu-up-n220 		- open up with top: -220px
                        .dropdown-menu-up-n250 		- open up with top: -250px
                        .dropdown-menu-up 			- open up without negative class


                    Dropdown prefix icon (optional, if enabled in variables.scss)
                        .prefix-link-icon .prefix-icon-dot 		- link prefix
                        .prefix-link-icon .prefix-icon-line 	- link prefix
                        .prefix-link-icon .prefix-icon-ico 		- link prefix
                        .prefix-link-icon .prefix-icon-arrow 	- link prefix

                    .nav-link.nav-link-caret-hide 	- no dropdown icon indicator on main link
                    .nav-item.dropdown-mega 		- required ONLY on fullwidth mega menu

                    Mobile animation - add to .navbar-collapse:
                    .navbar-animate-fadein
                    .navbar-animate-fadeinup
                    .navbar-animate-bouncein

            -->
            <div class="collapse navbar-collapse navbar-animate-fadein" id="navbarMainNav">


                <!-- navbar : mobile menu -->
                <div class="navbar-xs d-none"><!-- .sticky-top -->

                    <!-- mobile menu button : close -->
                    <button class="navbar-toggler pt-0" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarMainNav" aria-controls="navbarMainNav" aria-expanded="false"
                            aria-label="Toggle navigation">
                        <svg width="20" viewBox="0 0 20 20">
                            <path d="M 20.7895 0.977 L 19.3752 -0.4364 L 10.081 8.8522 L 0.7869 -0.4364 L -0.6274 0.977 L 8.6668 10.2656 L -0.6274 19.5542 L 0.7869 20.9676 L 10.081 11.679 L 19.3752 20.9676 L 20.7895 19.5542 L 11.4953 10.2656 L 20.7895 0.977 Z"></path>
                        </svg>
                    </button>

                    <!--
                        Mobile Menu Logo
                        Logo : height: 70px max
                    -->
                    <a class="navbar-brand" href="{% url 'index' %}">
                        <img src="{% static 'images/logo/logo.jpg' %}" height="50" alt="...">
                    </a>

                </div>
                <!-- /navbar : mobile menu -->


                <!-- navbar : navigation -->
                <ul class="navbar-nav">
                    <!-- Menu -->
                    <!--

                        Dropdown Classes (should be added to primary .dropdown-menu only, dropdown childs are also affected)
                            .dropdown-menu-dark 		- dark dropdown (desktop only, will be white on mobile)
                            .dropdown-menu-hover 		- open on hover
                            .dropdown-menu-clean 		- no background color on hover
                            .dropdown-menu-invert 		- open dropdown in oposite direction (left|right, according to RTL|LTR)
                            .dropdown-menu-uppercase 	- uppercase text (font-size is scalled down to 13px)
                            .dropdown-click-ignore 		- keep dropdown open on inside click (useful on forms inside dropdown)

                            Repositioning long dropdown childs (Example: Pages->Account)
                                .dropdown-menu-up-n100 		- open up with top: -100px
                                .dropdown-menu-up-n100 		- open up with top: -150px
                                .dropdown-menu-up-n180 		- open up with top: -180px
                                .dropdown-menu-up-n220 		- open up with top: -220px
                                .dropdown-menu-up-n250 		- open up with top: -250px
                                .dropdown-menu-up 			- open up without negative class


                            Dropdown prefix icon (optional, if enabled in variables.scss)
                                .prefix-link-icon .prefix-icon-dot 		- link prefix
                                .prefix-link-icon .prefix-icon-line 	- link prefix
                                .prefix-link-icon .prefix-icon-ico 		- link prefix
                                .prefix-link-icon .prefix-icon-arrow 	- link prefix

                            .nav-link.nav-link-caret-hide 	- no dropdown icon indicator on main link
                            .nav-item.dropdown-mega 		- required ONLY on fullwidth mega menu

                    -->


                    <li class="nav-item {% if request.path == '/' or 'about/' in request.path %}active{% endif %}">
                        <a href="{% url 'about:index' %}" class="nav-link {% if request.path == '/' or 'about/' in request.path %}active{% endif %}">
                            {% trans "Про Центр" %}
                        </a>
                    </li>

                    <li class="nav-item {% if 'registry/' in request.path %}active{% endif %}">
                        <a href="{% url 'registry:index' %}" class="nav-link {% if 'registry/' in request.path %}active{% endif %}">
                            {% trans "Реєстр медіаторів" %}
                        </a>
                    </li>

                    <li class="nav-item dropdown">

                        <a href="{% url 'resources:index' %}"
                           id="mainNavBlog"
                           class="nav-link dropdown-toggle {% if 'resources/' in request.path %}active{% endif %}"
                           data-bs-toggle="dropdown"
                           aria-haspopup="true"
                           aria-expanded="false">
                            {% trans "Ресурси" %}
                        </a>

                        <div aria-labelledby="mainNavBlog"
                             class="dropdown-menu dropdown-menu-clean dropdown-menu-hover dropdown-fadeinup">
                            <ul class="list-unstyled m-0 p-0">
                                {% resources_active as recources_active %}
                                {% for item in recources_active %}
                                    <li class="dropdown-item {% if item.title|length > 70 %}text-wrap{% endif %}">
                                        <a class="dropdown-link{% if item.slug in request.path %} active{% endif %}"
                                           href="{% url 'resources:detail' slug=item.slug %}">{{ item.title }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </li>

                    <li class="nav-item {% if 'contacts/' in request.path %}active{% endif %}">
                        <a href="{% url 'contacts:index' %}" class="nav-link {% if 'contacts/' in request.path %}active{% endif %}">
                            {% trans "Зворотний зв’язок" %}
                        </a>
                    </li>

                </ul>
                <!-- /navbar : navigation -->
            </div>

            {% include '_partials/languages.html' %}

            {% if request.user.is_authenticated %}
                <!-- OPTIONS -->
                <ul class="list-inline list-unstyled mb-0 ms-3 d-flex align-items-end">

                    <li class="list-inline-item mx-1 dropdown">

                        <a href="#" aria-label="Account Options" id="dropdownAccountOptions"
                           class="btn btn-sm rounded-circle btn-light bg-transparent text-muted shadow-none"
                           data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">
                                        <span class="group-icon">
                                            <i class="fi fi-user-male"></i>
                                            <i class="fi fi-close"></i>
                                        </span>
                        </a>


                        <div aria-labelledby="dropdownAccountOptions"
                             class="list-unstyled dropdown-menu dropdown-menu-clean dropdown-click-ignore end-0 py-2 rounded-xl"
                             style="min-width:215px;">

                            <div class="dropdown-header px-3 mb-1 py-2 text-wrap fw-medium"><span class="small">{{ request.user }}</span></div>
                            <div class="dropdown-divider mb-3"></div>
                            <a class="dropdown-item px-3" href="{% url 'admin:index' %}" target="_blank">
                                <svg class="text-gray-600 float-start" width="18px" height="18px" xmlns="http://www.w3.org/2000/svg" fill="currentColor"  viewBox="0 0 16 16">
                                  <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"></path>
                                  <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"></path>
                                </svg>

                                <span class="ms-1">Адмін-панель</span>
                            </a>
                            <div class="dropdown-divider mt-3"></div>
                            <a href="{% url 'logout' %}" title="Log Out" class="dropdown-item mt-1 px-3">
                                <i class="fi fi-power float-start"></i>
                                Вихід
                            </a>
                        </div>

                    </li>

                </ul>
                <!-- /OPTIONS -->
            {% endif %}
        </nav>

    </div>
    <!-- /Navbar -->

</header>
<!-- /Header -->